var headlineengine_post=function(){"use strict";function e(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}!function n(r,t,i){function o(s,l){if(!t[s]){if(!r[s]){if(!l&&e)return e(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[s]={exports:{}};r[s][0].call(c.exports,(function(e){var n=r[s][1][e];return o(n||e)}),c,c.exports,n,r,t,i)}return t[s].exports}for(var a=e,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,n,r){Object.defineProperty(r,"__esModule",{value:!0});var t=function(){function e(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,r,t){return r&&e(n.prototype,r),t&&e(n,t),n}}(),i=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return t(e,null,[{key:"fleschKincaidGradeLevel",value:function(e){var n=this.wordCount(e);return n/this.sentenceCount(e)*.39+this.syllableCount(e)/n*11.8-15.59}},{key:"fleschReadingEaseScore",value:function(e){var n=this.wordCount(e);return 206.835-n/this.sentenceCount(e)*1.015-this.syllableCount(e)/n*84.6}},{key:"sentenceCount",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/[\.?!]/,r=[],t=e.split(n),i=t.length-1;i>=0;i--){var o=t[i].trim();""!=o&&r.push(o)}return r.length}},{key:"syllableCount",value:function(e){if("string"!=typeof e&&!(e instanceof Array))return null;e instanceof Array&&(e=e.join(" "));for(var n=this.getWords(e),r=0,t=n.length-1;t>=0;t--)r+=this.wordSyllableCount(n[t]);return r}},{key:"wordSyllableCount",value:function(e){var n=void 0;return(e=e.toLowerCase()).length<=3?1:(n=(e=(e=e.replace(/(?:[^laeiouy]es|ed|[^laeiouy]e)$/,"")).replace(/^y/,"")).match(/[aeiouy]{1,2}/g))?n.length:0}},{key:"wordCount",value:function(e){return this.getWords(e).length}},{key:"getWords",value:function(e){for(var n=[],r=void 0,t=(e=this.removePunctuation(e)).split(" "),i=0;i<t.length;i++)""!=(r=t[i].trim())&&n.push(r);return n}},{key:"removePunctuation",value:function(e){return e.replace(/[^a-zA-z ]/g,"")}}]),e}();r.default=i},{}],2:[function(e,n,r){var t=function(e){return e&&e.__esModule?e:{default:e}}(e("./models/wordsmith"));window.Wordsmith=t.default},{"./models/wordsmith":1}]},{},[2]);var n,r,t={exports:{}};n=t,r=t.exports,function(e){function t(e,n){if(!(this instanceof t))return new t(e,n);this.domain=[],this.range=[],Array.isArray(e)&&(this.domain=e),Array.isArray(n)&&(this.range=n);var r=function(e){if("number"!=typeof e)return null;var n=this.domain[0],r=this.domain[1],t=this.range[0],i=this.range[1];"number"!==t&&"number"!=typeof i&&(t=n,i=r);const o=t+(i-t)/(r-n)*(e-n);return o===1/0?i:o===-1/0||isNaN(o)?t:o}.bind(this);return r.domain=function(e){return Array.isArray(e)&&(this.domain=e),r}.bind(this),r.range=function(e){return Array.isArray(e)&&(this.range=e),r}.bind(this),r}n.exports&&(r=n.exports=t),r.LinearScale=t}();const i=t.exports;function o(e,n,r){const t=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);if(e<t||e>o)return 0;if(e===n)return 1;let a,s;e<n?(a=[0,n-t],s=e-t):(a=[0,o-n],s=e-n);return i(a,[0,1])(s)}return async function(){const e=[headlineengine_readability_range_min||45,headlineengine_readability_range_max||90],n=headlineengine_readability_target||55,r=e[0],t=e[1],i=["Good","Too Simple","Too Complex"],a=[headlineengine_length_range_min||40,headlineengine_length_range_max||90],s=headlineengine_length_target||82,l=["Good","Too Short","Too Long"];function u(u){const d=jQuery("#title").val();if(!d)return void u.html("");const h=function(e){if(!e)return;const n=e.length;let r=0;return n<a[0]?r=1:n>a[1]&&(r=2),{score:o(n,s,a),rating:r,length:n,message:l[r],pass:n>=a[0]&&n<=a[1]}}(d),f=function(a){if(!a)return;const s=Wordsmith.fleschReadingEaseScore(a);let l=0;return s<r?l=2:s>t&&(l=1),{ease_score:s,score:o(s,n,e),rating:l,ease_score:s,message:i[l],pass:s>=r&&s<=t}}(d),g=function(e){if(!e)return;const n=(e=e.toLowerCase().replace(/[^a-z]/g," ")).split(" ").filter((e=>e.length>3)).filter((e=>c.includes(e)));return{score:n.length?1:0,rating:n.length,words:n,pass:n.length>0}}(d),y=h.pass+f.pass+g.pass,v=y>=3?"good":y>=1?"okay":"bad",p=(h.score+f.score+g.score)/3,m=jQuery(`\n        <div class='headlineengine-score'>\n            <div class='headlineengine-score-value headlineengine-score-value-${v}'>${Math.floor(100*p)}</div>\n            <div class='headlineengine-score-title'>HeadlineEngine<br>Score</div>\n        </div>`),w=jQuery(`<div class="headlineengine-analysis">\n            <div class="headlineengine-analysis-readability">Readability: ${f.message} (${Math.round(f.ease_score)})</div>\n            <div class="headlineengine-analysis-length">Length: ${h.message} (${h.length})</div>\n            <div class="headlineengine-analysis-powerwords">Powerwords: ${g.words.length?g.words.map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(", "):"None"}</div>\n        </div>`);u.html(m),u.append(w)}const c=(await jQuery.get(headlineengine_powerwords_api).catch((e=>{console.log("Could not load powerwords list")}))).map((e=>e.toLowerCase()));jQuery((async()=>{const e=jQuery("#titlewrap"),n=jQuery("<div id='headlineengine-score-container'></div>");e.after(n),u(n),jQuery("#title").on("keyup",(function(e){u(n)}))}))}(),{}}();
//# sourceMappingURL=headlineengine-post.js.map
