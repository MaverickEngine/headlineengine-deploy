{"version":3,"file":"headlineengine-post.js","sources":["../node_modules/wordsmith-js/dist/wordsmith.min.js","../src/headlineengine-post.js"],"sourcesContent":["!function e(n,t,r){function o(i,a){if(!t[i]){if(!n[i]){var l=\"function\"==typeof require&&require;if(!a&&l)return l(i,!0);if(u)return u(i,!0);var s=new Error(\"Cannot find module '\"+i+\"'\");throw s.code=\"MODULE_NOT_FOUND\",s}var f=t[i]={exports:{}};n[i][0].call(f.exports,function(e){var t=n[i][1][e];return o(t?t:e)},f,f.exports,e,n,t,r)}return t[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,n,t){\"use strict\";function r(e,n){if(!(e instanceof n))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=function(){function e(){r(this,e)}return o(e,null,[{key:\"fleschKincaidGradeLevel\",value:function(e){var n=this.wordCount(e),t=this.sentenceCount(e),r=this.syllableCount(e);return.39*(n/t)+11.8*(r/n)-15.59}},{key:\"fleschReadingEaseScore\",value:function(e){var n=this.wordCount(e),t=this.sentenceCount(e),r=this.syllableCount(e);return 206.835-1.015*(n/t)-84.6*(r/n)}},{key:\"sentenceCount\",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/[\\.?!]/,t=[],r=e.split(n),o=r.length-1;o>=0;o--){var u=r[o].trim();\"\"!=u&&t.push(u)}return t.length}},{key:\"syllableCount\",value:function(e){if(\"string\"!=typeof e&&!(e instanceof Array))return null;e instanceof Array&&(e=e.join(\" \"));for(var n=this.getWords(e),t=0,r=n.length-1;r>=0;r--)t+=this.wordSyllableCount(n[r]);return t}},{key:\"wordSyllableCount\",value:function(e){var n=void 0;return e=e.toLowerCase(),e.length<=3?1:(e=e.replace(/(?:[^laeiouy]es|ed|[^laeiouy]e)$/,\"\"),e=e.replace(/^y/,\"\"),n=e.match(/[aeiouy]{1,2}/g),n?n.length:0)}},{key:\"wordCount\",value:function(e){return this.getWords(e).length}},{key:\"getWords\",value:function(e){e=this.removePunctuation(e);for(var n=[],t=void 0,r=e.split(\" \"),o=0;o<r.length;o++)t=r[o].trim(),\"\"!=t&&n.push(t);return n}},{key:\"removePunctuation\",value:function(e){return e.replace(/[^a-zA-z ]/g,\"\")}}]),e}();t.default=u},{}],2:[function(e,n,t){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}var o=e(\"./models/wordsmith\"),u=r(o);window.Wordsmith=u.default},{\"./models/wordsmith\":1}]},{},[2]);","require(\"./headlineengine-post-style.scss\");\nrequire(\"wordsmith-js/dist/wordsmith.min.js\");\nconst powerword_list = headlineengine_powerwords_list.split(\"\\n\").map(w => w.toLowerCase());\nconst readable_range = [headlineengine_readability_range_min || 45, headlineengine_readability_range_max || 90];\nconst readable_range_min = readable_range[0];\nconst readable_range_max = readable_range[1];\nconst readability_messages = [\"Good\", \"Too Simple\", \"Too Complex\"];\nconst length_range = [headlineengine_length_range_min || 40, headlineengine_length_range_max || 90];\nconst length_messages = [\"Good\", \"Too Short\", \"Too Long\"];\n\nfunction readability(title) {\n    if (!title) return;\n    const score = Wordsmith.fleschReadingEaseScore(title);\n    let rating = 0;\n    if (score < readable_range_min) {\n        rating = 2;\n    } else if (score > readable_range_max) {\n        rating = 1;\n    }\n    return {rating, score, message: readability_messages[rating], pass: score >= readable_range_min && score <= readable_range_max };\n}\n\nfunction length(title) {\n    if (!title) return;\n    const length = title.length;\n    let rating = 0;\n    if (length < length_range[0]) {\n        rating = 1;\n    } else if (length > length_range[1]) {\n        rating = 2;\n    }\n    return { rating, length, message: length_messages[rating], pass: length >= length_range[0] && length <= length_range[1] };\n}\n\nfunction powerwords(title) {\n    if (!title) return;\n    title = title.toLowerCase().replace(/[^a-z]/g, \" \");\n    const words = title.split(\" \").filter(w => w.length > 3);\n    const powerwords_found = words.filter(w => powerword_list.includes(w));\n    return { rating: powerwords_found.length, words: powerwords_found, pass: powerwords_found.length > 0 };\n}\n\nfunction display_analysis() {\n    const title = jQuery(\"#title\").val();\n    if (!title) {\n        jQuery(\"#headlineengine-score-container\").html(\"\");\n        return;\n    }\n    const length_result = length(title);\n    const readability_result = readability(title);\n    const powerwords_result = powerwords(title);\n    const score = length_result.pass + readability_result.pass + powerwords_result.pass;\n    const rating = score >= 3 ? \"good\" : score >= 1 ? \"okay\" : \"bad\";\n    const score_el = jQuery(`\n    <div class='headlineengine-score'>\n        <div class='headlineengine-score-value headlineengine-score-value-${rating}'>${ Math.floor(score / 3 * 100) }</div>\n        <div class='headlineengine-score-title'>Headline Score</div>\n    </div>`);\n    const analysis = jQuery(`<div class=\"headlineengine-analysis\">\n        <div class=\"headlineengine-analysis-readability\">Readability: ${readability_result.message} (${Math.round(readability_result.score)})</div>\n        <div class=\"headlineengine-analysis-length\">Length: ${length_result.message} (${length_result.length})</div>\n        <div class=\"headlineengine-analysis-powerwords\">Powerwords: ${(powerwords_result.words.length) ? powerwords_result.words.map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(\", \") : \"None\" }</div>\n    </div>`);\n    jQuery(\"#headlineengine-score-container\").html(score_el);\n    jQuery(\"#headlineengine-score-container\").append(analysis);\n\n}\n\nasync function main() {\n    jQuery(() => {\n        // const titlewrap_el = jQuery(\"#titlewrap\");\n        // const ab_el = jQuery(\"<input type='button' class='button' value='A/B' id='headlineengine-main-title-ab' />\");\n        // titlewrap_el.append(ab_el);\n        display_analysis();\n    });\n    jQuery(\"#title\").on(\"keyup\", function(e) {\n        display_analysis();\n    })\n}\n\nmain();"],"names":["e","n","t","r","o","i","a","require","u","s","Error","code","f","exports","call","length","Object","defineProperty","value","enumerable","configurable","writable","key","prototype","TypeError","this","wordCount","sentenceCount","syllableCount","arguments","split","trim","push","Array","join","getWords","wordSyllableCount","toLowerCase","replace","match","removePunctuation","default","__esModule","window","Wordsmith","powerword_list","headlineengine_powerwords_list","map","w","readable_range","headlineengine_readability_range_min","headlineengine_readability_range_max","readable_range_min","readable_range_max","readability_messages","length_range","headlineengine_length_range_min","headlineengine_length_range_max","length_messages","display_analysis","title","jQuery","val","html","length_result","rating","message","pass","readability_result","score","fleschReadingEaseScore","readability","powerwords_result","powerwords_found","filter","includes","words","powerwords","score_el","Math","floor","analysis","round","charAt","toUpperCase","slice","append","async","on","main"],"mappings":"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"}